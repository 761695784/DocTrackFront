<app-navbar></app-navbar>

<div class="container">

  <div class="header-text">
    <h1 class="animated-title">DÃ©couvrez et GÃ©rez Vos Publications</h1>
    <p class="subtitle">Modifier ici le statut de vos publications de documents perdus en cliquant sur l'icone de la croix une fois la restitution faite, ou bien supprimer simplement en clicquant sur la corbeille.</p><br>
    <button (click)="showTrashedDocuments()" class="trash-button">ğŸ—‘ï¸ Corbeille</button>
  </div>

  <div class="grid-container" *ngIf="showTrashed">
    <div class="card" *ngFor="let trashedPublication of trashedPublications">
        <!-- <img loading="lazy" [src]="trashedPublication.image ? 'http://localhost:8003' + trashedPublication.image : '/assets/default-image.png'" alt="Document Image" /> -->
        <img loading="lazy" [src]="trashedPublication.image ? 'https://doctrackapi.malang2019marna.simplonfabriques.com' + trashedPublication.image : '/assets/default-image.png'" alt="Document Image" />
        <div class="card-content">
            <p class="published-by">PubliÃ© par {{ trashedPublication.user.FirstName }} {{ trashedPublication.user.LastName }} | {{ trashedPublication.created_at | date:'dd MMM yyyy' }}</p>
            <p>PrÃ©nom propriÃ©taire: <strong>{{ trashedPublication.OwnerFirstName }}</strong></p>
            <p>Nom propriÃ©taire: <strong>{{ trashedPublication.OwnerLastName }}</strong></p>

            <div class="card-actions">
                <button class="restore-icon" (click)="restorePublication(trashedPublication.id)" style="cursor: pointer;">ğŸ”„ Restaurer</button>
            </div>
        </div>
    </div>
</div>


  <div *ngIf="publications.length === 0">
    <p class="no-publications">Vous n'avez aucune publication pour le moment.</p>
  </div>

  <div class="grid-container">
    <!-- Boucle pour afficher toutes les publications -->
    <div class="card" *ngFor="let publication of publications">
      <!-- Affichage dynamique de l'image -->
      <img loading="lazy" [src]="publication.image ? 'https://doctrackapi.malang2019marna.simplonfabriques.com' + publication.image : '/assets/default-image.png'" alt="Document Image" />
      <!-- <img loading="lazy" [src]="publication.image ? 'http://localhost:8003' + publication.image : '/assets/default-image.png'" alt="Document Image" /> -->
      <div class="blur-overlay"></div>

      <div class="card-content">
        <!-- Informations dynamiques de la publication -->
        <p class="published-by">PubliÃ© par <strong>{{ publication.user.FirstName }} {{ publication.user.LastName }} | {{ publication.created_at | date:'dd MMM yyyy' }}</strong></p>
        <p class="phone-number">ğŸ“ {{ publication.user.Phone }}</p>
        <p>Document: <strong>{{ publication.document_type.TypeName }}</strong></p>
        <p>PrÃ©nom propriÃ©taire: <strong>{{ publication.OwnerFirstName }}</strong></p>
        <p>Nom propriÃ©taire: <strong>{{ publication.OwnerLastName }}</strong></p>

        <div class="card-actions">
          <span class="delete-icon" (click)="deletePublication(publication.id)" style="cursor: pointer;">ğŸ—‘ï¸</span>
          <span class="status" (click)="toggleStatus(publication)" [ngClass]="publication.statut === 'rÃ©cupÃ©rÃ©' ? 'success' : 'error'" style="cursor: pointer;">
            {{ publication.statut === 'rÃ©cupÃ©rÃ©' ? 'âœ”ï¸' : 'âŒ' }}
          </span>
        </div>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>
