<app-sideheaders></app-sideheaders>

<!-- Barre de recherche et de filtrage -->
<!-- Barre de recherche -->
<div class="search-bar">

    <!-- Menu d√©roulant pour filtrer par statut -->
    <select [(ngModel)]="selectedFilter" (change)="filterDocuments()">
      <option value="all">Tous les documents</option>
      <option value="softdeleted">Supprim√©s</option>
      <option value="r√©cup√©r√©">R√©cup√©r√©s</option>
      <option value="non r√©cup√©r√©">Non r√©cup√©r√©s</option>
    </select>
  <input
    type="text"
    placeholder="Rechercher en tapant les mots cl√©s"
    [(ngModel)]="searchTerm"
    (input)="filterDocuments()"
  />
  <button class="search-btn" (click)="filterDocuments()">Chercher un document</button>


</div>


<!-- Conteneur principal pour les documents -->
<div class="container">
  <div *ngIf="pasderesultat" class="error-message">
    Aucun document trouv√© pour votre recherche.
  </div>
  <!-- Grille des cartes de documents -->
  <div class="grid-container">
    <div *ngFor="let document of paginatedDocuments" class="card">
      <img *ngIf="document.image" loading="lazy" [src]="document.image" alt="document" />
      <div class="blur-overlay"></div>
      <p *ngIf="!document.image">Image non disponible</p>

      <div class="card-content">
        <p class="published-by">
          Publi√© par {{ document.user.FirstName }} {{ document.user.LastName }} | {{ document.created_at | date }}
        </p>
        <p class="phone-number">üìû {{ document.user.Phone }}</p>
        <p>Document : <strong>{{ document.document_type.TypeName }}</strong></p>

        <p>Pr√©nom propri√©taire : <strong>{{ document.OwnerFirstName }}</strong></p>
        <p>Nom propri√©taire : <strong>{{ document.OwnerLastName }}</strong></p>

        <div class="card-actions">
          <span
            class="delete-icon"
            (click)="deletePublication(document.id)"
            style="cursor: pointer; color: red; font-size: 40px;"
            >üóëÔ∏è</span
          >

          <button class="details-btn" (click)="viewDetails(document.id)">Voir d√©tails</button>

          <span class="status" [ngClass]="document.statut === 'r√©cup√©r√©' ? 'success' : 'error'">
            {{ document.statut === 'r√©cup√©r√©' ? '‚úîÔ∏è' : '‚ùå' }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Contr√¥les de pagination -->
  <div class="pagination-controls">
    <button (click)="pageChanged(currentPage - 1)" [disabled]="currentPage === 1">Pr√©c√©dent</button>
    <span>Page {{ currentPage }} sur {{ totalPages }}</span>
    <button (click)="pageChanged(currentPage + 1)" [disabled]="currentPage === totalPages">Suivant</button>
  </div>
</div>
